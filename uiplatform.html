<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>BH:UI Platform</title>
		<link rel="stylesheet" href="jquery-ui.min.css">
		<script src="jquery-1.11.1.min.js"></script>
		<script src="jquery-ui.min.js"></script>
		<style>

		  #uiplatform h3 { text-align: center; margin: 0; }

	  	</style>

		<script>

			var datakeeper = {
				put: function(key, value) {
					localStorage[key] = value;
				},
				get: function(key) {
					return localStorage[key];
				}
			}

			$(function() {

				$( "#uiplatform" ).draggable();
				$( "#uiplatform" ).resizable();

				$('#target_url').keypress(function(e) {
				    if(e.which == 13) { // Checks for the enter key
				        console.log("!");
						loadUrlIntoIframe();
				    }
				});

				$( "input[type=submit], a, button" ).button();


				var lastUrl = datakeeper.get("LAST_URL");
				$("#target_url").val(lastUrl);
				if(lastUrl != null && lastUrl !== "") {
					loadUrlIntoIframe();
				}


				$("#uiplatform").resize(function() {
					$("#frame_height").text($(this).height() + " px");
					$("#frame_width").text($(this).width() + "px");
				});

				$("#frame_height").text($("#uiplatform").height() + ' px');
				$("#frame_width").text($("#uiplatform").width() + ' px');
			});

			function loadUrlIntoIframe() {
				var targetUrl = $("#target_url").val();

				if(targetUrl.indexOf("http://") === -1 &&
					targetUrl.indexOf("https://") === -1) {
					targetUrl = "http://" + targetUrl;
				}

				console.log("ready to load: " + targetUrl);

				$("#frame").attr("src", targetUrl);

				datakeeper.put("LAST_URL", targetUrl);
			}
		</script>

	</head>
	<body>
		<h3>Welcome to BH_Lin's UI platform</h3>
		<p style="margin-bottom:0px">Enter a website address here: </p>
		<input id="target_url" type="url" style="width:480px"> <button onclick="loadUrlIntoIframe()">Load</button>
		<div>
			<h4 style="display:inline">Size of UI Frame:</h4>
			<p style="display:inline"> height: <span id="frame_height" style="color:red;"></span></p>
			<p style="display:inline"> widht: <span id="frame_width" style="color:red;"></span></p>
		</div>
		<div id="uiplatform" class="ui-widget-content" style="height:60px;width:200px;">
			<h3 class="ui-widget-header">UI Frame</h3>
			<iframe id="frame" style="height:100%;width:100%;"></iframe>
		</div>

	</body>
</html>
